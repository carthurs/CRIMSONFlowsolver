TOP = ../..

include $(TOP)/buildoptions.mk

CFLAGS = $(GLOBAL_CFLAGS) $(MPI_INCDIR) $(METIS_INCDIR) $(LESLIB_DEFS) $(LESLIB_INCDIR) $(SOLVERIO_INCDIR) $(FLOWSOLVER_INCDIR)
CXXFLAGS  = $(GLOBAL_CXXFLAGS) $(MPI_INCDIR) $(METIS_INCDIR) $(LESLIB_DEFS) $(LESLIB_INCDIR) $(SOLVERIO_INCDIR) $(FLOWSOLVER_INCDIR) \
            $(VERDANDI_INCDIR) $(PETSC_INCDIR) $(BOOSTCPP_INCDIR) $(VTK_INCDIR)
FFLAGS   = $(GLOBAL_FFLAGS) $(MPI_INCDIR) $(METIS_INCDIR)

HDRS  =   

CXXSRCS = ROUKF_flowsolver.cxx

CSRCS   = 

FSRCS   = 

SRCS  = $(FSRCS) $(CSRCS) $(CXXSRCS)

OBJS  = $(FSRCS:.f90=.$(OBJECTEXT)) $(CSRCS:.c=.$(OBJECTEXT)) $(CXXSRCS:.cxx=.$(OBJECTEXT))

$(TARGET_ESTIMATOR): $(OBJS)
	$(LINK_EXE)$(TARGET_ESTIMATOR) $(GLOBAL_LFLAGS) $(OBJS) \
	$(PETSC_LIBS) $(LUA_LIBS) \
	$(FLOWSOLVER_LIBS) $(SOLVERIO_LIBS) $(METIS_LIBS) $(LESLIB_LIBS) $(FLOWSOLVER_LIBS) \
	$(VTK_LIBS) $(MKL_LIBS) \
	$(F90_LIBS) $(CXX_LIBS)
					
	mv $(TARGET_ESTIMATOR) $(TOP)/bin	

.PHONY : clean
clean : 
	-$(RM) $(OBJS) $(TARGET_ESTIMATOR) *.mod *.exe *.pdb *.manifest
	-$(RM) $(TOP)/bin/$(TARGET_ESTIMATOR)*
